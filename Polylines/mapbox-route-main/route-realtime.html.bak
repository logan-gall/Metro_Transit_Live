<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Update a feature in realtime</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<div id="map"></div>

<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoibWF0dGllZ2lzc2VsYmVjayIsImEiOiJjbG5hcmhvOWMwMHVhMmtsaW04M3dqb2N6In0.KDF-cF60UnFy3r1hGWlWfQ';
    const map = new mapboxgl.Map({
        container: 'map',
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/mapbox/satellite-streets-v12',
        zoom: 0
    });

    map.on('load', () => {
    // Replace this with your local GeoJSON data
    const data = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "geometry": {"type":"LineString","coordinates":[[-93.22156,44.98718],[-93.22153,44.99151],[-93.22485,44.99146],[-93.22525,44.99144],[-93.22543,44.99147],[-93.22637,44.99145],[-93.22781,44.99147],[-93.22871,44.99149],[-93.22888,44.99145],[-93.23262,44.99147],[-93.23279,44.99151],[-93.23459,44.99154],[-93.23717,44.99156],[-93.23709,44.99101],[-93.237,44.99077],[-93.23666,44.98961],[-93.23665,44.98935],[-93.23671,44.989],[-93.23684,44.98866],[-93.23697,44.98843],[-93.23697,44.9883],[-93.23729,44.98799],[-93.23776,44.98763],[-93.24007,44.9863],[-93.24054,44.98596],[-93.24101,44.98555],[-93.24127,44.98528],[-93.24376,44.98214],[-93.24407,44.98164],[-93.24431,44.98112],[-93.24569,44.97758],[-93.24598,44.97706],[-93.24635,44.97656],[-93.24672,44.97617],[-93.24729,44.9757],[-93.24925,44.97425],[-93.24998,44.97363],[-93.25072,44.97289],[-93.25154,44.97193],[-93.25158,44.97181],[-93.25249,44.97074],[-93.25288,44.97016],[-93.25317,44.9696],[-93.25355,44.96853],[-93.25388,44.96762],[-93.25407,44.96727],[-93.25432,44.96697],[-93.25465,44.96668],[-93.25502,44.96643],[-93.25541,44.96623],[-93.25589,44.96606],[-93.25647,44.96592],[-93.25707,44.96586],[-93.26003,44.96582],[-93.26065,44.96585],[-93.26371,44.96584],[-93.26595,44.96589],[-93.2672,44.9659],[-93.26753,44.96587],[-93.26789,44.96579],[-93.26818,44.96568],[-93.2688,44.96535],[-93.26912,44.96512],[-93.26949,44.96477],[-93.26976,44.96436],[-93.26989,44.96402],[-93.26996,44.96369],[-93.26996,44.96321],[-93.26982,44.96074],[-93.26972,44.96057],[-93.26976,44.9577],[-93.26983,44.95714],[-93.26995,44.95667],[-93.27013,44.95624],[-93.27048,44.95564],[-93.27108,44.95488],[-93.27287,44.95271],[-93.27382,44.95172],[-93.27427,44.95119],[-93.27467,44.95057],[-93.27489,44.95006],[-93.27505,44.94942],[-93.27511,44.94888],[-93.27513,44.94718],[-93.27508,44.94609],[-93.27496,44.94465],[-93.27491,44.94364],[-93.27491,44.94134],[-93.27484,44.9406],[-93.27479,44.93545],[-93.27482,44.93235],[-93.27485,44.92623],[-93.27494,44.92256],[-93.27505,44.92012],[-93.27507,44.91752],[-93.27499,44.90995],[-93.27507,44.90491],[-93.27508,44.90194],[-93.27509,44.90157],[-93.27517,44.90146],[-93.27527,44.8996],[-93.27532,44.89754],[-93.27529,44.89748],[-93.2754,44.89422],[-93.27548,44.89321],[-93.27559,44.89314],[-93.27569,44.89269],[-93.27585,44.89232],[-93.27611,44.89195],[-93.27644,44.89162],[-93.27684,44.89133],[-93.2773,44.89108],[-93.2779,44.89084],[-93.27838,44.8907],[-93.27908,44.89056],[-93.27976,44.89049],[-93.28004,44.89049],[-93.28026,44.89045],[-93.28237,44.89044],[-93.29227,44.89051],[-93.29629,44.89047],[-93.29917,44.89051],[-93.30759,44.89078],[-93.30931,44.89081],[-93.31222,44.8908],[-93.31988,44.89085],[-93.32048,44.89081],[-93.32122,44.8907],[-93.32202,44.8905],[-93.32254,44.8903],[-93.32308,44.89003],[-93.32654,44.88787],[-93.3271,44.88759],[-93.3277,44.88737],[-93.32785,44.88722],[-93.32795,44.88669],[-93.32802,44.88614],[-93.32803,44.8855],[-93.32805,44.88446],[-93.32802,44.87327],[-93.32793,44.87268],[-93.3278,44.87211],[-93.32762,44.87157],[-93.32573,44.87104],[-93.32588,44.86638],[-93.32658,44.86661],[-93.32718,44.86677],[-93.32762,44.86686],[-93.32844,44.86697],[-93.32919,44.86702],[-93.33015,44.86701],[-93.33458,44.8669],[-93.33555,44.86681],[-93.3357,44.86666],[-93.33593,44.86574],[-93.33624,44.86484],[-93.33713,44.8639],[-93.33735,44.86147],[-93.33756,44.86076],[-93.33773,44.85987],[-93.33783,44.85888],[-93.33787,44.85794],[-93.33786,44.85703],[-93.33781,44.85641],[-93.3376,44.85551],[-93.33617,44.85377],[-93.33617,44.84276],[-93.33632,44.84261],[-93.33781,44.84279],[-93.34186,44.84319],[-93.34335,44.84335],[-93.34352,44.84333],[-93.351,44.84409],[-93.35234,44.84419],[-93.35342,44.84422],[-93.35472,44.84418],[-93.35598,44.84409],[-93.35711,44.84395],[-93.3581,44.84378],[-93.35885,44.8436],[-93.35957,44.84337],[-93.36014,44.84313],[-93.36082,44.84277],[-93.36105,44.84264],[-93.36175,44.84215],[-93.36217,44.84177],[-93.36268,44.84122],[-93.36321,44.84048],[-93.36416,44.83907],[-93.36439,44.8388],[-93.36736,44.83453],[-93.36779,44.83377],[-93.36815,44.83299],[-93.36838,44.83232],[-93.36861,44.83138],[-93.3704,44.82351],[-93.3705,44.82318],[-93.37076,44.82262],[-93.3711,44.82212],[-93.37149,44.82165],[-93.37196,44.82121],[-93.37229,44.82095],[-93.37292,44.82054],[-93.37359,44.8202],[-93.37441,44.81989],[-93.37517,44.81968],[-93.37591,44.81954],[-93.38051,44.81882],[-93.38671,44.81787],[-93.39342,44.81682],[-93.39494,44.81649],[-93.39635,44.81612],[-93.39822,44.81552],[-93.40005,44.81493],[-93.40094,44.81471],[-93.40188,44.81454],[-93.4028,44.81443],[-93.40391,44.81438],[-93.40475,44.81439],[-93.40574,44.81447],[-93.40668,44.81461],[-93.41043,44.81535],[-93.41136,44.81547],[-93.41239,44.81554],[-93.41295,44.81555],[-93.41309,44.81552],[-93.42618,44.81505],[-93.42694,44.81497],[-93.42769,44.81483],[-93.42858,44.8146],[-93.42925,44.81435],[-93.42991,44.81405],[-93.43052,44.81371],[-93.43107,44.81333],[-93.43157,44.8129],[-93.43232,44.81211],[-93.43739,44.8065],[-93.43786,44.80604],[-93.43835,44.80565],[-93.43921,44.80509],[-93.43983,44.80477],[-93.44051,44.80449],[-93.4412,44.80425],[-93.44208,44.80401],[-93.44223,44.80386],[-93.44233,44.80305],[-93.44241,44.80217],[-93.44256,44.80004],[-93.44694,44.79989],[-93.44709,44.79974],[-93.44729,44.79706],[-93.4476,44.79449],[-93.44792,44.79138],[-93.45158,44.78884],[-93.45175,44.76182],[-93.45203,44.76076],[-93.45232,44.75942],[-93.45255,44.7583],[-93.45286,44.75751],[-93.45337,44.75656],[-93.45395,44.7552],[-93.4545,44.75389],[-93.45502,44.75283],[-93.45566,44.75189],[-93.45636,44.75091],[-93.45688,44.74994],[-93.45755,44.7493],[-93.45759,44.74853],[-93.45827,44.74835],[-93.45855,44.74746],[-93.45876,44.747],[-93.45898,44.74657],[-93.45916,44.74602],[-93.45926,44.74535],[-93.45938,44.74473],[-93.45942,44.7434],[-93.45947,44.74295],[-93.46219,44.74275],[-93.46367,44.74331],[-93.46459,44.74356],[-93.46531,44.74373],[-93.4658,44.74389],[-93.4676,44.74395],[-93.46856,44.74395],[-93.46885,44.74392],[-93.46909,44.74386],[-93.46985,44.74376],[-93.46964,44.74334],[-93.46952,44.74248],[-93.4692,44.74163],[-93.46915,44.73905],[-93.46915,44.73824],[-93.46926,44.73755],[-93.46932,44.73401],[-93.46945,44.73349],[-93.46965,44.73296],[-93.46972,44.73237],[-93.46995,44.7322],[-93.47033,44.73183],[-93.47065,44.73131],[-93.4711,44.73184],[-93.47137,44.7325],[-93.47162,44.73276],[-93.47175,44.73294],[-93.47208,44.733],[-93.47262,44.73303],[-93.4737,44.73307],[-93.4744,44.7332],[-93.47482,44.73342],[-93.4754,44.73368],[-93.47594,44.73441],[-93.47696,44.73516],[-93.47766,44.73676],[-93.47813,44.73792],[-93.47825,44.73869],[-93.4793,44.73888],[-93.48004,44.74001],[-93.48024,44.73861],[-93.48032,44.73819],[-93.48037,44.73801],[-93.48039,44.73778],[-93.48037,44.73757],[-93.48016,44.73736],[-93.47991,44.73659],[-93.47975,44.7359],[-93.47959,44.73539],[-93.47928,44.73513],[-93.47903,44.73489],[-93.47908,44.73475],[-93.4792,44.73453],[-93.47979,44.73425],[-93.47991,44.73324],[-93.47997,44.73286],[-93.48003,44.7325],[-93.48011,44.73174],[-93.48017,44.73138],[-93.48036,44.73124],[-93.48062,44.73099],[-93.48072,44.7308],[-93.48125,44.73076],[-93.48157,44.73074],[-93.48183,44.73086],[-93.48196,44.73099],[-93.48198,44.73104],[-93.48198,44.7311]]}
   
                
        }
    ]
 };

        const coordinates = data.features[0].geometry.coordinates;

        // start by showing just the first coordinate
        data.features[0].geometry.coordinates = [coordinates[0]];

        // add it to the map
        map.addSource('trace', { type: 'geojson', data: data });
        map.addLayer({
            'id': 'trace',
            'type': 'line',
            'source': 'trace',
            'paint': {
                'line-color': 'white',
                'line-opacity': 0.75,
                'line-width': 5
            }
        });

        // setup the viewport
        map.jumpTo({ 'center': coordinates[0], 'zoom': 8 });
        map.setPitch(30);

        // on a regular basis, add more coordinates from the saved list and update the map
        let i = 0;
        const timer = setInterval(() => {
            if (i < coordinates.length) {
                data.features[0].geometry.coordinates.push(coordinates[i]);
                map.getSource('trace').setData(data);
                map.panTo(coordinates[i]);
                i++;
            } else {
                window.clearInterval(timer);
            }
        }, 10);
    });
</script>

</body>
</html>